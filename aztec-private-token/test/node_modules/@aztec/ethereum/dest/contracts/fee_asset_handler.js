import { EthAddress } from '@aztec/foundation/eth-address';
import { FeeAssetHandlerAbi } from '@aztec/l1-artifacts/FeeAssetHandlerAbi';
import { encodeFunctionData, getContract } from 'viem';
export class FeeAssetHandlerContract {
    txUtils;
    address;
    constructor(address, txUtils){
        this.txUtils = txUtils;
        if (address instanceof EthAddress) {
            address = address.toString();
        }
        this.address = EthAddress.fromString(address);
    }
    async getOwner() {
        const contract = getContract({
            abi: FeeAssetHandlerAbi,
            address: this.address.toString(),
            client: this.txUtils.client
        });
        return EthAddress.fromString(await contract.read.owner());
    }
    getMintAmount() {
        const contract = getContract({
            abi: FeeAssetHandlerAbi,
            address: this.address.toString(),
            client: this.txUtils.client
        });
        return contract.read.mintAmount();
    }
    mint(recipient) {
        if (recipient instanceof EthAddress) {
            recipient = recipient.toString();
        }
        return this.txUtils.sendAndMonitorTransaction({
            to: this.address.toString(),
            data: encodeFunctionData({
                abi: FeeAssetHandlerAbi,
                functionName: 'mint',
                args: [
                    recipient
                ]
            })
        });
    }
    setMintAmount(amount) {
        return this.txUtils.sendAndMonitorTransaction({
            to: this.address.toString(),
            data: encodeFunctionData({
                abi: FeeAssetHandlerAbi,
                functionName: 'setMintAmount',
                args: [
                    amount
                ]
            })
        });
    }
}
