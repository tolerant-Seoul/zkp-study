import { type Logger } from '@aztec/foundation/log';
import { DateProvider } from '@aztec/foundation/timer';
import { type Abi, type Account, type BlockOverrides, type Hex, type StateOverride } from 'viem';
import type { ViemClient } from '../types.js';
import { type L1TxUtilsConfig } from './config.js';
import type { GasPrice, L1BlobInputs, L1TxRequest, TransactionStats } from './types.js';
export declare class ReadOnlyL1TxUtils {
    client: ViemClient;
    protected logger: Logger;
    readonly dateProvider: DateProvider;
    protected debugMaxGasLimit: boolean;
    config: Required<L1TxUtilsConfig>;
    protected interrupted: boolean;
    constructor(client: ViemClient, logger: Logger | undefined, dateProvider: DateProvider, config?: Partial<L1TxUtilsConfig>, debugMaxGasLimit?: boolean);
    interrupt(): void;
    restart(): void;
    getBlock(): Promise<{
        number: bigint;
        hash: `0x${string}`;
        nonce: `0x${string}`;
        logsBloom: `0x${string}`;
        baseFeePerGas: bigint | null;
        blobGasUsed: bigint;
        difficulty: bigint;
        excessBlobGas: bigint;
        extraData: Hex;
        gasLimit: bigint;
        gasUsed: bigint;
        miner: import("viem").Address;
        mixHash: import("viem").Hash;
        parentBeaconBlockRoot?: `0x${string}` | undefined;
        parentHash: import("viem").Hash;
        receiptsRoot: Hex;
        sealFields: Hex[];
        sha3Uncles: import("viem").Hash;
        size: bigint;
        stateRoot: import("viem").Hash;
        timestamp: bigint;
        totalDifficulty: bigint | null;
        transactionsRoot: import("viem").Hash;
        uncles: import("viem").Hash[];
        withdrawals?: import("viem").Withdrawal[] | undefined | undefined;
        withdrawalsRoot?: `0x${string}` | undefined;
        transactions: `0x${string}`[];
    }>;
    getBlockNumber(): Promise<bigint>;
    /**
     * Analyzes pending transactions and recent fee history to determine a competitive priority fee.
     * Falls back to network estimate if data is unavailable or fails.
     * @param networkEstimateResult - Result from estimateMaxPriorityFeePerGas RPC call
     * @param pendingBlockResult - Result from getBlock with pending tag RPC call
     * @param feeHistoryResult - Result from getFeeHistory RPC call
     * @returns A competitive priority fee based on pending txs and recent block history
     */
    protected getCompetitivePriorityFee(networkEstimateResult: PromiseSettledResult<bigint | null>, pendingBlockResult: PromiseSettledResult<Awaited<ReturnType<ViemClient['getBlock']>> | null>, feeHistoryResult: PromiseSettledResult<Awaited<ReturnType<ViemClient['getFeeHistory']>> | null>): bigint;
    /**
     * Gets the current gas price with bounds checking
     */
    getGasPrice(gasConfigOverrides?: L1TxUtilsConfig, isBlobTx?: boolean, attempt?: number, previousGasPrice?: typeof attempt extends 0 ? never : GasPrice): Promise<GasPrice>;
    /**
     * Estimates gas and adds buffer
     */
    estimateGas(account: Account | Hex, request: L1TxRequest, _gasConfig?: L1TxUtilsConfig, _blobInputs?: L1BlobInputs): Promise<bigint>;
    getTransactionStats(txHash: string): Promise<TransactionStats | undefined>;
    tryGetErrorFromRevertedTx(data: Hex, args: {
        args: readonly any[];
        functionName: string;
        abi: Abi;
        address: Hex;
    }, blobInputs: (L1BlobInputs & {
        maxFeePerBlobGas: bigint;
    }) | undefined, stateOverride?: StateOverride): Promise<string | undefined>;
    simulate(request: L1TxRequest & {
        gas?: bigint;
        from?: Hex;
    }, blockOverrides?: BlockOverrides<bigint, number>, stateOverrides?: StateOverride, abi?: Abi, _gasConfig?: L1TxUtilsConfig & {
        fallbackGasEstimate?: bigint;
    }): Promise<{
        gasUsed: bigint;
        result: `0x${string}`;
    }>;
    protected _simulate(call: any, blockOverrides: BlockOverrides<bigint, number> | undefined, stateOverrides: StateOverride | undefined, gasConfig: L1TxUtilsConfig & {
        fallbackGasEstimate?: bigint;
    }, abi: Abi): Promise<{
        gasUsed: bigint;
        result: `0x${string}`;
    }>;
    bumpGasLimit(gasLimit: bigint, _gasConfig?: L1TxUtilsConfig): bigint;
    /**
     * Helper function to retry RPC calls twice
     */
    private tryTwice;
}
//# sourceMappingURL=readonly_l1_tx_utils.d.ts.map